# Global tags can be specified here in key="value" format.
[global_tags]
  Company = "IIDA ELECTRONICS (THAILAND) COMPANY LIMITED"
  System  = "Windows"

# Configuration for telegraf agent
[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = "" # ปล่อยว่างไว้เพื่อให้ Telegraf ดึงชื่อเครื่องอัตโนมัติ
  omit_hostname = false

# Output Configuration for InfluxDB v2
[[outputs.influxdb_v2]]
  urls = ["http://10.232.9.98:8086"]
  token = "vLmB2c3byyR0NdQjIetLS5rF9E-aIfiKx-WLGV-GUn57Ag2ctscniAp2P1FFhR7_QTgAlhufT56-IWj2NwBPsA=="
  organization = "01_Monitoring_ORG"
  bucket = "01_Monitoring_BUCKET"

# --- Input Plugins for Windows ---

# ดึงข้อมูลการใช้ CPU
[[inputs.win_perf_counters]]
  [[inputs.win_perf_counters.object]]
    ObjectName = "Processor"
    Instances = ["_Total"]
    Counters = ["% Processor Time", "User Time", "Idle Time"]
    Measurement = "win_cpu"

# ดึงข้อมูล Memory (RAM)
[[inputs.win_perf_counters]]
  [[inputs.win_perf_counters.object]]
    ObjectName = "Memory"
    Counters = ["Available Bytes", "Committed Bytes", "% Committed Bytes In Use"]
    Instances = ["------"]
    Measurement = "win_mem"

# ดึงข้อมูล Logical Disk (พื้นที่ใน Drive)
[[inputs.win_perf_counters]]
  [[inputs.win_perf_counters.object]]
    ObjectName = "LogicalDisk"
    Instances = ["*"]
    Counters = ["% Free Space", "Free Megabytes", "Current Disk Queue Length"]
    Measurement = "win_disk"
    # กรองเฉพาะ Drive ที่มีอยู่จริง ไม่รวม Network Drive
    IncludeTotal = true

# ดึงข้อมูล System Performance
[[inputs.win_perf_counters]]
  [[inputs.win_perf_counters.object]]
    ObjectName = "System"
    Counters = ["Context Switches/sec", "System Calls/sec", "Processor Queue Length", "System Up Time"]
    Instances = ["------"]
    Measurement = "win_system"

# ดึงข้อมูล Network Interface
[[inputs.win_perf_counters]]
  [[inputs.win_perf_counters.object]]
    ObjectName = "Network Interface"
    Counters = ["Bytes Received/sec", "Bytes Sent/sec", "Packets Received/sec", "Packets Sent/sec"]
    Instances = ["*"]
    Measurement = "win_net"
